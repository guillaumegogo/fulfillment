<?phpsession_start();include 'functions.php';$file_data=$_SESSION["file_data"];// output headers so that the file is downloaded rather than displayedheader('Content-type: text/csv');header('Content-Disposition: attachment; filename="demo.csv"'); // do not cache the fileheader('Pragma: no-cache');header('Expires: 0');$configs = explode(",",urldecode($_GET['c']));// create a file pointer connected to the output stream$file = fopen('php://output', 'w');$row = 1;foreach($file_data as $data){	$num = count($data);		if($row<9){		fputcsv($file, $data);		}else{		$items=(array)null;		for($i=13; $i < $num-2; $i++){			$items[] = $data[$i];		}		$label=implode($items,'-');				if(in_array($label, $configs))	{			$data[3]=stripAccents($data[3]);			$data[4]=stripAccents($data[4]);			$data[5]=stripAccents($data[5]);			$data[6]=stripAccents($data[6]);			$data[7]=stripAccents($data[7]);			$data[8]=preg_replace("/[^a-zA-Z0-9]/", "", $data[8]);			fputcsv($file, $data);		}	}	$row++;} exit();?>